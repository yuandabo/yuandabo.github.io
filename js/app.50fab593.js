(function(t){function e(e){for(var a,o,r=e[0],c=e[1],l=e[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,o=1;o<s.length;o++){var c=s[o];0!==n[c]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=s[0]))}return t}var a={},n={app:0},i=[];function o(t){return r.p+"js/"+({}[t]||t)+"."+{"chunk-2d216244":"ee510d4e"}[t]+".js"}function r(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.e=function(t){var e=[],s=n[t];if(0!==s)if(s)e.push(s[2]);else{var a=new Promise((function(e,a){s=n[t]=[e,a]}));e.push(s[2]=a);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=o(t);var l=new Error;i=function(e){c.onerror=c.onload=null,clearTimeout(d);var s=n[t];if(0!==s){if(s){var a=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",l.name="ChunkLoadError",l.type=a,l.request=i,s[1](l)}n[t]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(e)},r.m=t,r.c=a,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(s,a,function(e){return t[e]}.bind(null,a));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var u=l;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"01e8":function(t,e,s){},"0d80":function(t,e,s){"use strict";s("1272")},1272:function(t,e,s){},"139c":function(t,e,s){},"1e8e":function(t,e,s){},2881:function(t,e,s){"use strict";s("d103")},"3a09":function(t,e,s){"use strict";s("fc01")},"414a":function(t,e,s){},4478:function(t,e,s){"use strict";s("91ae")},"56d7":function(t,e,s){"use strict";s.r(e);s("2a00");var a=s("129d"),n=(s("0988"),s("59ba")),i=(s("8019"),s("a97c")),o=(s("42e2"),s("7b07")),r=(s("6460"),s("2a3c")),c=(s("06bb"),s("28e4")),l=(s("7c1c"),s("291a")),d=(s("8867"),s("f12e")),u=(s("59aa"),s("43f6")),p=(s("1e97"),s("6cbd")),h=(s("4434"),s("82cf")),m=(s("b4dc"),s("ccad")),f=(s("66f5"),s("5835")),v=(s("5c26"),s("12f5")),g=(s("fe7f"),s("2b22")),C=(s("6179"),s("7a8e")),b=(s("8e95"),s("96a3")),_=(s("d862"),s("96b3")),w=(s("be22"),s("4981")),y=(s("8f79"),s("ee4d")),x=(s("b332"),s("5b4a")),k=(s("25ba"),s("5f1c"),s("6ba0"),s("b47f"),s("a593")),S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{size:"24px"}},[t._v("加载中...")]),s("keep-alive",[s("router-view",{attrs:{seller:t.seller,ratings:t.ratings}})],1)],1)},j=[],O=(s("6a61"),s("9ad1")),$=s("82ae"),R=s.n($);R.a.defaults.headers.post["Content-Type"]="application/json";var P=R.a.create({timeout:3e4});P.interceptors.request.use(function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.data=e.data||{},e.baseURL="http://127.0.0.1:3001",t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){Promise.reject(t)})),P.interceptors.response.use((function(t){var e=t.data;return e}),(function(t){if(t&&t.response)switch(t.response.status){case 400:t.message="请求错误";break;case 401:t.message="未登录";break;case 403:t.message="拒绝访问";break;case 404:t.message="请求地址出错: ".concat(t.response.config.url);break;case 408:t.message="请求超时";break;case 500:t.message="服务器内部错误";break;case 501:t.message="服务未实现";break;case 502:t.message="网关错误";break;case 503:t.message="服务不可用";break;case 504:t.message="网关超时";break;case 505:t.message="HTTP版本不受支持";break;default:break}return Promise.reject(t)}));var N=P,D=N,T=function(t,e){return D({url:t,data:e,method:"post"})},Z=function(t,e){return D({url:t,params:e,method:"get"})},z=function(t){return T("/user/order/save",t)},E=function(t){return Z("/admin/get/all",t)},Y=function(t){return T("/user/order/queryById",t)},I={data:function(){return{seller:{name:"粥品香坊（回龙观）",description:"蜂鸟专送",deliveryTime:38,score:4.2,serviceScore:4.1,foodScore:4.3,rankRate:69.2,minPrice:20,deliveryPrice:4,ratingCount:24,sellCount:90,bulletin:"粥品香坊其烹饪粥料的秘方源于中国千年古法，\n          在融和现代制作工艺，由世界烹饪大师屈浩先生领衔研发。坚守纯天然、0添加的良心品质深得消费者青睐，发展至今成为粥类的引领品牌。\n          是2008年奥运会和2013年园博会指定餐饮服务商。",avatar:"http://static.galileo.xiaojukeji.com/static/tms/seller_avatar_256px.jpg"},ratings:[],loading:!1}},created:function(){},methods:{getAll:function(){var t=this;E().then((function(e){"200"===e.code?(t.seller=e.data.seller,t.ratings=e.data.ratings):t.$toast("请求失败")})).catch((function(e){console.error(e),t.$toast("请求失败")})).finally((function(){t.loading=!1}))}}},A=I,J=(s("d7bc"),s("5d22")),M=Object(J["a"])(A,S,j,!1,null,"4e890f99",null),q=M.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"goods",staticClass:"goods",style:{height:t.height}},[s("vheader",{attrs:{seller:t.seller}}),s("vtag",{staticClass:"tag",on:{"tabs-click":t.tagclick}}),s("router-view",{attrs:{goods:t.goods,seller:t.seller}})],1)},U=[],F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("div",{staticClass:"content-warpper"},[s("div",{staticClass:"avatar"},[s("div",{staticClass:"img"},[s("van-image",{staticClass:"imgdom",attrs:{width:"80",height:"80",src:t.seller.avatar},scopedSlots:t._u([{key:"error",fn:function(){return[s("van-image",{attrs:{width:"80",height:"80",src:"img/jordan.png"}})]},proxy:!0}])})],1),s("div",{staticClass:"content"},[s("div",{staticClass:"title"},[s("van-icon",{staticClass:"brand",attrs:{name:t.getIcon("brand2x")}}),s("span",{staticClass:"name"},[t._v(t._s(t.seller.name))])],1),s("div",{staticClass:"description"},[t._v(t._s(t.seller.description))]),s("div",{staticClass:"description"},[t._v("平均配送时间："+t._s(t.seller.deliveryTime)+"分钟")]),t.seller.supports?s("div",{staticClass:"supports"},[s("van-icon",{staticClass:"icon",attrs:{name:t.getIcon("decrease_1@2x")}}),s("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[0].description))])],1):t._e()])]),s("img",{staticClass:"backgroundImg",attrs:{src:"https://cube.elemecdn.com/7/b9/68df600d2b16a206de723f9e81c88png.png?x-oss-process=image/format,webp/resize,w_750",width:"100vw",height:"200"}})]),s("div",{staticClass:"bulletin-wrapper"},[s("van-icon",{staticClass:"bulletin-title",attrs:{name:t.getIcon("bulletin")}}),s("span",{staticClass:"bulletin-text"},[t._v(t._s(t.seller.bulletin))]),s("span")],1)])},B=[],X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"star",class:t.starType},t._l(t.itemClasses,(function(t,e){return s("span",{key:e,staticClass:"star-item",class:t})})),0)},H=[],V=(s("e680"),5),G="on",W="half",K="off",Q={props:{size:{type:Number},score:{type:Number}},computed:{starType:function(){return"star-"+this.size},itemClasses:function(){for(var t=[],e=Math.floor(2*this.score)/2,s=e%1!==0,a=Math.floor(e),n=0;n<a;n++)t.push(G);s&&t.push(W);while(t.length<V)t.push(K);return t}}},tt=Q,et=(s("9774"),Object(J["a"])(tt,X,H,!1,null,"4881dd44",null)),st=et.exports,at={props:{seller:{type:Object}},data:function(){return{detailShow:!1,loading:!1}},methods:{getIcon:function(t){return"img/".concat(t,".png")},showDetail:function(){this.detailShow=!0},hiddenDetail:function(){this.detailShow=!1}}},nt=at,it=(s("d9e9"),Object(J["a"])(nt,F,B,!1,null,"118e1f88",null)),ot=it.exports,rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-tabs",{attrs:{color:"rgb(0, 160, 220)"},on:{click:t.tabsClick},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[s("van-tab",{attrs:{title:"点餐"}}),s("van-tab",{attrs:{title:"评价"}}),s("van-tab",{attrs:{title:"商家"}})],1)},ct=[],lt={data:function(){return{active:0}},methods:{tabsClick:function(t,e){this.$emit("tabs-click",t)}}},dt=lt,ut=(s("4478"),Object(J["a"])(dt,rt,ct,!1,null,"c53c672e",null)),pt=ut.exports,ht={methods:{getAfterDotNums:function(t){var e=-1!==String(t).indexOf(".");return e?String(t).substring(String(t).indexOf(".")+1).length:0},stepperChange:function(t){for(var e,s=t.id,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.goods,i=0,o=n.length;i<o;i++)for(var r=n[i],c=0,l=r["foods"].length;c<l;c++){var d=r["foods"][c];if(d["id"]===s&&d.hasOwnProperty("count")){var u=d.count;e=u+a,e>9999?this.$toast("数量最为多9999"):e<0?this.$toast("数量不能少于0"):d.count=e;break}}}}},mt={name:"goods",components:{vheader:ot,vtag:pt},mixins:[ht],props:{seller:{type:Object,default:function(){return{}}}},data:function(){return{goods:[],listHeight:[],scrollY:0,showCom:!0,loading:!1,ulkey:0,currentIndex:0,height:"93vh"}},computed:{},mounted:function(){this.getAll()},methods:{tagclick:function(t){var e;0===t?(this.height="93vh",e="/goods/index"):1===t?(this.height="100vh",e="/goods/ratings"):2===t&&(this.height="100vh",e="/goods/seller"),this.$router.push({path:e})},initCount:function(){for(var t=this.goods,e=0,s=t.length;e<s;e++)for(var a=t[e],n=0,i=a["foods"].length;n<i;n++){var o=a["foods"][n];o.hasOwnProperty("count")&&"null"!==o["count"]||this.$set(o,"count",0)}},getAll:function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:R()("./data.json").then((function(t){e.goods=t.data.goods})),this.loading=!1;case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},ft=mt,vt=(s("d3bb"),Object(J["a"])(ft,L,U,!1,null,"7a6cc962",null)),gt=vt.exports,Ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"div",staticClass:"ratings"},[s("div",{staticClass:"ratings-content"},[s("div",{staticClass:"content-top"},[s("div",{staticClass:"content-left"},[s("h1",{staticClass:"score"},[t._v(t._s(t.seller.score))]),s("div",{staticClass:"title"},[t._v("综合评分")]),s("div",{staticClass:"rank"},[t._v("高于周围商家"+t._s(t.seller.rankRate))])]),s("div",{staticClass:"content-right"},[s("div",{staticClass:"score-wrapper"},[s("span",{staticClass:"score-wrapper-title"},[t._v("服务态度")]),s("star",{staticClass:"star",attrs:{size:36,score:t.seller.serviceScore}}),s("span",{staticClass:"score-wrapper-score"},[t._v(t._s(t.seller.serviceScore))])],1),s("div",{staticClass:"score-wrapper"},[s("span",{staticClass:"score-wrapper-title"},[t._v("商品评分")]),s("star",{staticClass:"star",attrs:{size:36,score:t.seller.foodScore}}),s("span",{staticClass:"score-wrapper-score"},[t._v(t._s(t.seller.foodScore))])],1),s("div",{staticClass:"delivery-wrapper"},[s("span",{staticClass:"delivery-wrapper-title"},[t._v("送达时间")]),s("span",{staticClass:"delivery"},[t._v(t._s(t.seller.deliveryTime)+"分钟")])])])]),s("div",{staticClass:"bottom-border"}),s("scroll",{staticClass:"wrapper",staticStyle:{height:"70vh",overflow:"hidden"},attrs:{data:t.computedRatings}},[s("div",{staticClass:"content"},[s("div",{staticClass:"content-bottom"},[s("div",{staticClass:"bottom-ratings"},[s("div",{staticClass:"bottom-ratings-all line gradient-line"},[s("span",{staticClass:"ratings-one",on:{click:function(e){t.type="0"}}},[t._v("全部"+t._s(t.allcontents))]),s("span",{staticClass:"ratings-two",on:{click:function(e){t.type="1"}}},[t._v("满意"+t._s(t.wellcontents.wellnum))]),s("span",{staticClass:"ratings-three",on:{click:function(e){t.type="2"}}},[t._v("一般"+t._s(t.commoncontents.commonnum))])]),s("div",{staticClass:"select-ratings"},[s("van-checkbox",{model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("只看有内容的评价")])],1)])]),s("div",{staticClass:"rating-text"},[s("ul",t._l(t.computedRatings,(function(e,a){return s("li",{key:a,staticClass:"rating-text-li gradient-line line"},[s("div",{staticClass:"rating-text-li-left"},[s("img",{staticClass:"rating-text-li-left-avatar",attrs:{src:e.avatar,width:"28",height:"28"}})]),s("div",{staticClass:"rating-text-li-right"},[s("div",{staticClass:"rating-text-li-right-name"},[t._v(t._s(e.username))]),s("star",{staticClass:"rating-text-li-right-star",attrs:{size:24,score:e.score}}),s("div",{staticClass:"rating-text-li-right-text"},[t._v(t._s(e.text))]),s("div",{staticClass:"rating-text-li-right-time"},[t._v(t._s(e.rateTime))])],1)])})),0)])])])],1)])},bt=[],_t=(s("1bc7"),s("0957")),wt={name:"ratings",components:{star:st},props:{seller:{type:Object}},data:function(){return{ratings:[{avatar:"img/kobe.png",username:"yuandabo",score:0,text:"非常不好",rateTime:"20200829"},{avatar:"img/kobe.png",username:"yuandabo",score:5,text:"非常好",rateTime:"20200829"},{avatar:"img/kobe.png",username:"yuandabo",score:3,text:"一般般",rateTime:"20200829"},{avatar:"img/kobe.png",username:"yuandabo",score:3,text:"",rateTime:"20200829"},{avatar:"img/kobe.png",username:"yuandabo",score:0,text:"非常不好",rateTime:"20200829"},{avatar:"img/kobe.png",username:"yuandabo",score:5,text:"非常好",rateTime:"20200829"},{avatar:"img/kobe.png",username:"yuandabo",score:3,text:"一般般",rateTime:"20200829"}],onlyhascontents:!1,type:"0",checked:!1}},mounted:function(){var t=this;this.$nextTick((function(){t._innitScroll()}))},computed:{computedRatings:function(){var t=[];return"0"===this.type&&(t=JSON.parse(JSON.stringify(this.ratings))),"1"===this.type&&(t=JSON.parse(JSON.stringify(this.wellcontents().wellArr))),"2"===this.type&&(t=JSON.parse(JSON.stringify(this.commoncontents().commonArr))),this.checked&&(t=JSON.parse(JSON.stringify(this.changetohascontents().constantsArr))),t},allcontents:function(){return this.ratings.length}},methods:{changeRatings:function(){},_innitScroll:function(){this.ratingsScroll=new _t["a"](this.$refs.div,{click:!0,probeType:3})},wellcontents:function(){var t=0,e=[];return this.ratings.forEach((function(s){s.score>=3&&(e.push(s),t++)})),{wellArr:e,wellnum:t}},commoncontents:function(){var t=0,e=[];return this.ratings.forEach((function(s){s.score<3&&(e.push(s),t++)})),{commonnum:t,commonArr:e}},changetohascontents:function(){var t=0,e=[],s=[];return"0"===this.type&&(s=this.ratings),"1"===this.type&&(s=this.wellcontents().wellArr),"2"===this.type&&(s=this.commoncontents().commonArr),s.forEach((function(s){""!==s.text&&(e.push(s),t++)})),{constants:t,constantsArr:e}}}},yt=wt,xt=(s("3a09"),Object(J["a"])(yt,Ct,bt,!1,null,"1701c26a",null)),kt=xt.exports,St=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("scroll",{ref:"div",staticClass:"wrapper seller",attrs:{pulldown:!0}},[s("div",{staticClass:"content"},[s("div",{staticClass:"seller-img"},[s("van-image",{attrs:{width:"100vw",height:"90",src:"https://cube.elemecdn.com/2/14/7059f0fe8c3eb2c691a595ef7f734png.png?x-oss-process=image/format,webp/resize,w_686"},scopedSlots:t._u([{key:"error",fn:function(){return[s("van-image",{attrs:{width:"100vw",height:"90",src:"https://cube.elemecdn.com/2/14/7059f0fe8c3eb2c691a595ef7f734png.png?x-oss-process=image/format,webp/resize,w_686"}})]},proxy:!0}])}),s("div",{staticClass:"img-title"},[t._v("\n          品牌故事|欢迎光临\n        ")]),s("div",{staticClass:"img-text"},[t._v("\n          我们是源自长沙\n        ")])],1),s("div",{staticClass:"seller-card"},[s("div",{staticClass:"card-title"},[s("div",{staticClass:"title-left"},[s("div",{staticClass:"title-name"},[t._v("茶颜悦色（仰天湖）")]),s("div",{staticClass:"title-address"},[t._v("湖南省长沙市天心区")])]),s("div",{staticClass:"title-right"},[s("van-icon",{attrs:{name:"phone-o",color:"#1989fa",size:"40"}})],1)]),s("div",{staticClass:"card-photo"},[s("van-image",{attrs:{width:"80px",height:"80px",src:"/img/jordan.png"},scopedSlots:t._u([{key:"error",fn:function(){return[s("van-image",{attrs:{width:"80px",height:"80px",src:"/img/jordan.png"}})]},proxy:!0}])}),s("van-image",{attrs:{width:"80px",height:"80px",src:"/img/jordan.png"},scopedSlots:t._u([{key:"error",fn:function(){return[s("van-image",{attrs:{width:"80px",height:"80px",src:"/img/jordan.png"}})]},proxy:!0}])})],1),s("div",{staticClass:"card-info"},[s("div",{staticClass:"info-name"},[t._v("商家类型")]),s("div",{staticClass:"info-address"},[t._v("商家品类：奶茶果汁"),s("br"),t._v("营业时间：10：00-22：30")])]),s("van-button",{staticStyle:{padding:"10px"},attrs:{plain:"",type:"info",size:"mini",color:"#999"}},[t._v("查看营业资质")])],1)])])],1)},jt=[],Ot={components:{star:st},props:{seller:{type:Object}},watch:{},mounted:function(){},methods:{}},$t=Ot,Rt=(s("64c6"),Object(J["a"])($t,St,jt,!1,null,"66eca702",null)),Pt=Rt.exports,Nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flexdir-column order"},[s("div",{staticClass:"order-background"}),s("van-nav-bar",{attrs:{title:"确认订单","left-arrow":""},on:{"click-left":t.onClickLeft}}),s("div",{staticClass:"flex-1"},[s("div",{staticClass:"order-address"},[s("div",{staticClass:"address-titile"},[t._v("订单配送至")]),s("div",{staticClass:"address-content",on:{click:function(e){return t.$router.push({path:"/address"})}}},[t._v(t._s(t.address)+"\n        "),s("van-icon",{attrs:{name:"arrow"}})],1)]),s("div",{staticClass:"order-send"},[s("div",{staticClass:"send-time"},[s("div",[t._v("送达时间")]),s("div",{staticClass:"right",on:{click:function(e){t.sheetshow=!0}}},[t._v("尽快送达(11:00)")])]),t._m(0)]),s("div",{staticClass:"order-cart"},[s("div",{staticClass:"cart-title"},[t._v("527烧烤")]),s("div",{staticClass:"cart-content"},t._l(t.selectfoods,(function(e,a){return s("div",{key:a,staticClass:"content-item"},[s("div",{staticClass:"flex-1"},[t._v("\n            "+t._s(e.description)+"\n          ")]),s("div",{staticClass:"flex-1"},[t._v("\n            "+t._s(e.price)+"/每份\n          ")]),s("div",{staticClass:"flex-1"},[t._v("\n            "+t._s(e.count)+"份\n          ")])])})),0),t._l(t.payList,(function(e,a){return s("div",{key:a,staticClass:"cart-sendpay"},[s("div",[t._v("配送费")]),s("div",{staticClass:"right"},[t._v("￥5.6")])])})),s("div",{staticClass:"cart-price"},[s("div",{staticClass:"price-left"},[t._v("优惠说明")]),s("div",{staticClass:"price-right right"},[t._v("小计￥"+t._s(t.totalPrice))])])],2),s("div",{staticClass:"remark"},[s("van-field",{attrs:{rows:"2",autosize:"",label:"留言",type:"textarea",maxlength:"50",placeholder:"请输入留言","show-word-limit":""},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1)]),s("van-submit-bar",{attrs:{price:3050,"button-text":"提交订单","button-type":"info"},on:{submit:t.onSubmit}}),s("van-action-sheet",{attrs:{actions:t.actions},on:{select:t.onSelect},model:{value:t.sheetshow,callback:function(e){t.sheetshow=e},expression:"sheetshow"}})],1)},Dt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"send-pay"},[s("div",[t._v("支付方式")]),s("div",{staticClass:"right"},[t._v("在线支付")])])}],Tt={name:"",data:function(){return{fold:!0,maskShow:!1,selectfoods:[],id:this.$route.query.id,mes:{},payList:[],message:"",sheetshow:!1,actions:[{name:"选项一"},{name:"选项二"},{name:"选项三"}],address:"请选择收获地址",totalPrice:0}},computed:{totalCount:function(){var t=0;return this.selectfoods.forEach((function(e){t+=e.count})),t},payDesc:function(){if(0===this.totalPrice)return"￥".concat(this.minprice,"元起");if(this.totalPrice<this.minprice){var t=this.minprice-this.totalPrice;return"还差￥".concat(t,"元")}return"去结算"},listShow:function(){if(!this.totalCount)return this.fold=!0,!1;var t=!this.fold;return t}},activated:function(){if(this.$route.query.content&&(this.address=this.$route.query.content),this.$db.getDb("order")){var t=this.$db.removeGetDb("order"),e=t.selectfoods,s=t.totalPrice;this.selectfoods=e,this.totalPrice=s}this.queryById()},methods:{onSelect:function(){},onSubmit:function(){this.$router.push({path:"/goods"})},onClickLeft:function(){this.$router.push({path:"/goods/index"})},queryById:function(){var t=this;Y({id:this.id}).then((function(e){"200"===e.code&&(t.mes=e.data[0])}))}}},Zt=Tt,zt=(s("8699"),Object(J["a"])(Zt,Nt,Dt,!1,null,"6c227e96",null)),Et=zt.exports,Yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flexdir-column foods"},[s("div",{staticClass:"goods-img"},[s("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:3e3,"indicator-color":"white"}},[s("van-swipe-item",[s("van-image",{attrs:{width:"99vw",height:"90",src:"https://cube.elemecdn.com/2/14/7059f0fe8c3eb2c691a595ef7f734png.png?x-oss-process=image/format,webp/resize,w_686"},scopedSlots:t._u([{key:"error",fn:function(){return[s("van-image",{attrs:{width:"100vw",height:"90",src:"https://cube.elemecdn.com/2/14/7059f0fe8c3eb2c691a595ef7f734png.png?x-oss-process=image/format,webp/resize,w_686"}})]},proxy:!0}])})],1),s("van-swipe-item",[s("van-image",{attrs:{width:"99vw",height:"90",src:"https://cube.elemecdn.com/2/14/7059f0fe8c3eb2c691a595ef7f734png.png?x-oss-process=image/format,webp/resize,w_686"},scopedSlots:t._u([{key:"error",fn:function(){return[s("van-image",{attrs:{width:"100vw",height:"90",src:"https://cube.elemecdn.com/2/14/7059f0fe8c3eb2c691a595ef7f734png.png?x-oss-process=image/format,webp/resize,w_686"}})]},proxy:!0}])})],1)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showCom,expression:"showCom"}],staticClass:"shoperrecommend"},[s("shoperrecommend",{attrs:{goods:t.goods}})],1),s("div",{staticClass:"goods-body"},[s("scroll",{staticClass:"wrapper menu-warpper",attrs:{pulldown:!0}},[s("ul",{staticClass:"content"},t._l(t.goods,(function(e,a){return s("li",{key:e.id,staticClass:"menu-item",class:t.getMenuItemClass(a),on:{click:function(e){return t.selectMenu(a)}}},[s("span",{staticClass:"menu-text"},[t._v(t._s(e.name))])])})),0)]),s("scroll",{ref:"foodsscroll",staticClass:"wrapper foods-warpper",attrs:{pulldown:!0},on:{pulldown:t.pulldown}},[s("ul",t._l(t.goods,(function(e,a){return s("li",{key:a,staticClass:"food-list food-list-hook"},[s("h1",{staticClass:"food-list-title"},[t._v(t._s(e.name))]),s("ul",{staticClass:"content"},t._l(e.foods,(function(e,a){return s("li",{key:a,staticClass:"food-item gradient-line line"},[s("div",{staticClass:"foods-image"},[s("van-image",{staticClass:"imgdom",attrs:{width:"90px",height:"90px",src:e.image},scopedSlots:t._u([{key:"error",fn:function(){return[s("van-image",{staticClass:"imgdom",attrs:{width:"90px",height:"90px",src:"/img/kobe.png"}})]},proxy:!0}],null,!0)})],1),s("span",{staticClass:"foods-content"},[s("h1",{staticClass:"foods-content-name"},[t._v(t._s(e.name))]),s("div",{staticClass:"foods-content-desc"},[t._v(t._s(e.description||"暂无介绍"))]),s("div",{staticClass:"foods-content-extra"},[s("span",[t._v("月售"+t._s(e.sellCount||0))])]),s("div",{staticClass:"food-priAndcar"},[s("div",{staticClass:"foods-price"},[s("span",{staticClass:"foods-price-now"},[s("span",{staticClass:"now-symbol"},[t._v("￥")]),s("span",{staticClass:"now-price"},[t._v(t._s(e.price))])]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.oldPrice,expression:"item.oldPrice"}],staticClass:"foods-price-old"},[t._v("￥"+t._s(e.oldPrice))])]),s("div",{staticClass:"cartcontrol-warpper"},[s("cartcontrol",{attrs:{food:e},on:{foodAdd:t.foodAdd,foodDec:t.foodDec}})],1)])])])})),0)])})),0)])],1),s("shopcar",{staticClass:"goods-shopcar",attrs:{selectfoods:t.selectfoods,deliveryprice:t.seller.deliveryPrice,minprice:t.seller.minPrice}})],1)},It=[],At=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shopcar"},[s("div",{staticClass:"content"},[s("div",{staticClass:"content-left",on:{click:t.toggleList}},[s("div",{staticClass:"shop-logo-warpper"},[s("div",{staticClass:"shop-logo"},[s("van-icon",{attrs:{name:t.getCartIcon(),size:"35",badge:t.totalCount}})],1)]),s("div",{staticClass:"pay-money",class:[t.totalCount>0?"price-highlight":""]},[t._v("￥"+t._s(t.totalPrice))])]),s("div",{staticClass:"content-right",on:{click:t.routerTo}},[s("div",{staticClass:"content-right-pay",class:[t.totalPrice>=t.minprice?"content-right-pay-highlight":""],on:{click:function(e){return t.postTotalPrice()}}},[t._v(t._s(t.payDesc))])])]),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcar-list"},[s("div",{staticClass:"shopcar-list-head"},[s("h1",{staticClass:"shopcar-list-head-title"},[t._v("购物车")]),s("span",{staticClass:"empty",on:{click:t.cleanlist}},[t._v("清空")])]),s("div",{staticClass:"shopcar-list-content"},[s("ul",t._l(t.selectfoods,(function(e,a){return s("li",{key:a,staticClass:"shopcar-list-content-food gradient-line line"},[s("span",{staticClass:"shopcar-list-content-food-name"},[t._v(t._s(e.name))]),s("div",{staticClass:"shopcar-list-content-food-price"},[s("span",[t._v("￥"+t._s(e.price*e.count))])]),s("div",{staticClass:"shopcar-control"},[s("carcontrol",{attrs:{food:e}})],1)])})),0)])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.maskShow,expression:"maskShow"}],staticClass:"list-mask",on:{click:t.maskClick}})],1)},Jt=[],Mt=(s("a450"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cartcontrol"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isZero,expression:"!isZero"}],ref:"dec",staticClass:"cart-decrease",on:{click:t.decreaseCart}},[s("van-icon",{attrs:{name:t.getIcon("dec"),size:"25"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isZero,expression:"!isZero"}],ref:"count",staticClass:"cart-count"},[t._v(t._s(t.food.count))]),s("div",{staticClass:"cart-add",on:{click:t.addCart}},[s("van-icon",{attrs:{name:t.getIcon("add"),size:"25"}})],1)])}),qt=[],Lt={name:"cartcontrol",props:{food:{type:Object}},data:function(){return{isZero:!0}},methods:{getIcon:function(t){return"img/".concat(t,".png")},addCart:function(){this.isZero&&(this.$refs.count.className="cart-count",this.$refs.dec.className="cart-decrease",this.isZero=!1),this.$emit("foodAdd",this.food)},decreaseCart:function(){var t=this;this.food.count-1===0&&(this.$refs.count.className="widthDec",this.$refs.dec.className="decHide",setTimeout((function(){t.isZero=!0,t.$refs.dec.className="display-none",t.$refs.count.className="display-none"}),500)),this.$emit("foodDec",this.food)}}},Ut=Lt,Ft=(s("0d80"),Object(J["a"])(Ut,Mt,qt,!1,null,"9b7c3e30",null)),Bt=Ft.exports,Xt={name:"shopcar",data:function(){return{fold:!0,maskShow:!1}},props:{deliveryprice:{type:Number,default:0},minprice:{type:Number,default:0},selectfoods:{type:Array,default:function(){return[]}}},components:{carcontrol:Bt},computed:{totalPrice:function(){var t=0;return this.selectfoods.forEach((function(e){t+=e.price*e.count})),t},totalCount:function(){var t=0;return this.selectfoods.forEach((function(e){t+=e.count})),t},payDesc:function(){if(0===this.totalPrice)return"￥".concat(this.minprice,"元起");if(this.totalPrice<this.minprice){var t=this.minprice-this.totalPrice;return"还差￥".concat(t,"元")}return"去结算"},listShow:function(){if(!this.totalCount)return this.fold=!0,!1;var t=!this.fold;return t}},mounted:function(){this.open()},methods:{routerTo:function(){this.totalPrice>=this.minprice&&(this.$db.setDb("order",{selectfoods:this.selectfoods,totalPrice:this.totalPrice}),this.$router.push({path:"/order"}))},maskClick:function(){this.fold=!0,this.maskShow=!1},getCartIcon:function(){var t=this.totalCount>0?"cartblue":"cartgrey";return this.getIcon(t)},getIcon:function(t){return"img/".concat(t,".png")},toggleList:function(){this.totalCount&&(this.fold=!this.fold,this.maskShow=!this.maskShow)},cleanlist:function(){this.selectfoods.forEach((function(t){t.count=0})),this.maskShow=!1},postTotalPrice:function(){var t=this;if("去结算"===this.payDesc)if(this.$db.getDb("phoneNum")){var e=JSON.stringify(this.cleanSelects(this.selectfoods));z({price:this.totalPrice,selects:e,phoneNum:this.$db.getDb("phoneNum")}).then((function(e){if("200"===e.code){t.$message({type:"success",message:"下单成功请等待上菜"});var s=JSON.stringify(t.selectfoods);t.$db.setDb("selectfoods",s),t.$router.push({path:"/order",query:{id:e.data}})}})),this.$db.cleanDb()}else this.open()},cleanSelects:function(t){var e=[];return t.forEach((function(t){e.push({name:t.name,count:t.count})})),e},open:function(){},openHistoryOrder:function(){var t=this;this.$confirm("系统查询到有历史订单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$message({type:"success",message:"进入成功!"})})).catch((function(){t.$db.cleanDb(),t.$message({type:"info",message:"取消进入"})}))}}},Ht=Xt,Vt=(s("e5b4"),Object(J["a"])(Ht,At,Jt,!1,null,"805fe3be",null)),Gt=Vt.exports,Wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),s("scroll",{ref:"siscroll",staticClass:"wrapper shoperRecommend-img-warrper",attrs:{pulldown:!0,scrollX:!0},on:{click:function(e){return t.changeImgPos()}}},[s("ul",{staticClass:"shoperRecommend-img-ul"},[s("li",{staticClass:"shoperRecommend-img-item"},[s("div",{staticClass:"shoperRecommend-img"},[s("img",{attrs:{width:"100px",height:"100px",src:"https://cube.elemecdn.com/d/a5/c034ad58e55d8d7fc08558bbba13ajpeg.jpeg?x-oss-process=image/resize,m_lfit,w_241/watermark,g_se,x_4,y_4,image_YS8xYS82OGRlYzVjYTE0YjU1ZjJlZmFhYmIxMjM4Y2ZkZXBuZy5wbmc_eC1vc3MtcHJvY2Vzcz1pbWFnZS9yZXNpemUsUF8yOA%3D%3D/quality,q_90/format,webp",alt:""}})]),s("div",{staticClass:"shoperRecommend-desc"},[s("h1",{staticClass:"shoperRecommend-desc-title"},[t._v("蜜汁炸鸡")]),s("span",{staticClass:"shoperRecommend-desc-monthseller"},[t._v("月售162")]),s("div",[s("span",{staticClass:"shoperRecommend-desc-newprice"},[s("span",{staticClass:"shoperRecommend-desc-doller1"},[t._v("￥")]),t._v("15\n            ")]),s("span",{staticClass:"shoperRecommend-desc-oldprice"},[t._v("￥23")])])])]),s("li",{staticClass:"shoperRecommend-img-item"},[s("div",{staticClass:"shoperRecommend-img"},[s("img",{attrs:{width:"100px",height:"100px",src:"https://cube.elemecdn.com/d/a5/c034ad58e55d8d7fc08558bbba13ajpeg.jpeg?x-oss-process=image/resize,m_lfit,w_241/watermark,g_se,x_4,y_4,image_YS8xYS82OGRlYzVjYTE0YjU1ZjJlZmFhYmIxMjM4Y2ZkZXBuZy5wbmc_eC1vc3MtcHJvY2Vzcz1pbWFnZS9yZXNpemUsUF8yOA%3D%3D/quality,q_90/format,webp",alt:""}})]),s("div",{staticClass:"shoperRecommend-desc"},[s("h1",{staticClass:"shoperRecommend-desc-title"},[t._v("蜜汁炸鸡")]),s("span",{staticClass:"shoperRecommend-desc-monthseller"},[t._v("月售162")]),s("div",[s("span",{staticClass:"shoperRecommend-desc-newprice"},[s("span",{staticClass:"shoperRecommend-desc-doller1"},[t._v("￥")]),t._v("15\n            ")]),s("span",{staticClass:"shoperRecommend-desc-oldprice"},[t._v("￥23")])])])]),s("li",{staticClass:"shoperRecommend-img-item"},[s("div",{staticClass:"shoperRecommend-img"},[s("img",{attrs:{width:"100px",height:"100px",src:"https://cube.elemecdn.com/d/a5/c034ad58e55d8d7fc08558bbba13ajpeg.jpeg?x-oss-process=image/resize,m_lfit,w_241/watermark,g_se,x_4,y_4,image_YS8xYS82OGRlYzVjYTE0YjU1ZjJlZmFhYmIxMjM4Y2ZkZXBuZy5wbmc_eC1vc3MtcHJvY2Vzcz1pbWFnZS9yZXNpemUsUF8yOA%3D%3D/quality,q_90/format,webp",alt:""}})]),s("div",{staticClass:"shoperRecommend-desc"},[s("h1",{staticClass:"shoperRecommend-desc-title"},[t._v("蜜汁炸鸡")]),s("span",{staticClass:"shoperRecommend-desc-monthseller"},[t._v("月售162")]),s("div",[s("span",{staticClass:"shoperRecommend-desc-newprice"},[s("span",{staticClass:"shoperRecommend-desc-doller1"},[t._v("￥")]),t._v("15\n            ")]),s("span",{staticClass:"shoperRecommend-desc-oldprice"},[t._v("￥23")])])])]),s("li",{staticClass:"shoperRecommend-img-item"},[s("div",{staticClass:"shoperRecommend-img"},[s("img",{attrs:{width:"100px",height:"100px",src:"https://cube.elemecdn.com/d/a5/c034ad58e55d8d7fc08558bbba13ajpeg.jpeg?x-oss-process=image/resize,m_lfit,w_241/watermark,g_se,x_4,y_4,image_YS8xYS82OGRlYzVjYTE0YjU1ZjJlZmFhYmIxMjM4Y2ZkZXBuZy5wbmc_eC1vc3MtcHJvY2Vzcz1pbWFnZS9yZXNpemUsUF8yOA%3D%3D/quality,q_90/format,webp",alt:""}})]),s("div",{staticClass:"shoperRecommend-desc"},[s("h1",{staticClass:"shoperRecommend-desc-title"},[t._v("蜜汁炸鸡")]),s("span",{staticClass:"shoperRecommend-desc-monthseller"},[t._v("月售162")]),s("div",[s("span",{staticClass:"shoperRecommend-desc-newprice"},[s("span",{staticClass:"shoperRecommend-desc-doller1"},[t._v("￥")]),t._v("15\n            ")]),s("span",{staticClass:"shoperRecommend-desc-oldprice"},[t._v("￥23")])])])])])])],1)},Kt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shoperRecommend-word-warpper"},[s("span",{staticClass:"shoperRecommend-word"},[t._v("商家推荐")])])}],Qt={props:{food:{type:Object}},mounted:function(){},methods:{changeImgPos:function(){this.$emit("dosomenthing")}}},te=Qt,ee=(s("aae6"),Object(J["a"])(te,Wt,Kt,!1,null,"e441a9c0",null)),se=ee.exports,ae={methods:{getAfterDotNums:function(t){var e=-1!==String(t).indexOf(".");return e?String(t).substring(String(t).indexOf(".")+1).length:0},stepperChange:function(t){for(var e,s=t.id,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.goods,i=0,o=n.length;i<o;i++)for(var r=n[i],c=0,l=r["foods"].length;c<l;c++){var d=r["foods"][c];if(d["id"]===s&&d.hasOwnProperty("count")){var u=d.count;e=u+a,e>9999?this.$toast("数量最为多9999"):e<0?this.$toast("数量不能少于0"):d.count=e;break}}}}},ne={components:{shopcar:Gt,cartcontrol:Bt,shoperrecommend:se},mixins:[ae],props:{goods:{type:Array},seller:{type:Object}},data:function(){return{showCom:!0,loading:!1,ulkey:0,currentIndex:0}},computed:{selectfoods:{get:function(){var t=[];return this.goods.forEach((function(e){e.foods.forEach((function(e){e.count&&t.push(e)}))})),t}}},mounted:function(){},methods:{getMenuItemClass:function(t){return t===this.currentIndex?"current":""},foodDec:function(t){this.stepperChange(t,-1)},foodAdd:function(t){this.stepperChange(t)},pulldown:function(){var t=document.getElementsByClassName("goods")[0];setTimeout((function(){t.scrollTop=0}),500)},selectMenu:function(t){this.currentIndex=Number(t);var e=document.getElementsByClassName("food-list-hook"),s=e[t];this.$refs.foodsscroll.scroll.scrollToElement(s,300)}}},ie=ne,oe=(s("2881"),Object(J["a"])(ie,Yt,It,!1,null,"d0a9b26a",null)),re=oe.exports,ce=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"address"},[s("van-nav-bar",{attrs:{title:"新增地址","left-arrow":""},on:{"click-left":t.onClickLeft}}),s("van-address-edit",{attrs:{"area-list":t.areaList,"button-type":"info","show-postal":"","show-delete":"","show-set-default":"","show-search-result":"","search-result":t.searchResult,"area-columns-placeholder":["请选择","请选择","请选择"]},on:{save:t.onSave,delete:t.onDelete,"change-detail":t.onChangeDetail}})],1)},le=[],de=(s("8dee"),{data:function(){return{areaList:{province_list:{11e4:"北京市",12e4:"天津市"},city_list:{110100:"北京市",110200:"县",120100:"天津市",120200:"县"},county_list:{110101:"东城区",110102:"西城区",110105:"朝阳区",110106:"丰台区",120101:"和平区",120102:"河东区",120103:"河西区",120104:"南开区",120105:"河北区"}},searchResult:[]}},methods:{onClickLeft:function(){this.$router.go(-1)},onSave:function(t){Object(_["a"])("save"),this.$router.replace({path:"/order",query:{content:t.addressDetail}})},onDelete:function(){Object(_["a"])("delete")},onChangeDetail:function(t){this.searchResult=t?[{name:"黄龙万科中心",address:"杭州市西湖区"}]:[]}}}),ue=de,pe=(s("fc98"),Object(J["a"])(ue,ce,le,!1,null,"53b861f4",null)),he=pe.exports,me=[{path:"*",redirect:"/goods"},{path:"/goods",redirect:"/goods/index",name:"goods",component:gt,children:[{path:"index",component:re},{path:"ratings",component:kt},{path:"seller",component:Pt}]},{path:"/order",name:"order",component:Et},{path:"/address",name:"address",component:he}],fe=s("8aaf");k["a"].use(fe["a"]);var ve=new fe["a"]({routes:me}),ge=ve;k["a"].component("scroll",(function(){return s.e("chunk-2d216244").then(s.bind(null,"c0cd"))}));var Ce={setDb:function(t,e){e=JSON.stringify(e),sessionStorage.setItem(t,e)},getDb:function(t){return JSON.parse(sessionStorage.getItem(t))},delDb:function(t){sessionStorage.removeItem(t)},cleanDb:function(){sessionStorage.clear()},removeGetDb:function(t){var e=sessionStorage.getItem(t);return sessionStorage.removeItem(t),JSON.parse(e)}},be=(s("ad37"),!0);s("139c");k["a"].use(x["a"]),k["a"].use(y["a"]),k["a"].use(w["a"]),k["a"].use(_["a"]),k["a"].use(b["a"]),k["a"].use(C["a"]),k["a"].use(g["a"]),k["a"].use(v["a"]),k["a"].use(f["a"]),k["a"].use(m["a"]),k["a"].use(h["a"]),k["a"].use(p["a"]),k["a"].use(u["a"]),k["a"].use(d["a"]),k["a"].use(l["a"]),k["a"].use(c["a"]),k["a"].use(r["a"]),k["a"].use(o["a"]),k["a"].use(i["a"]),k["a"].use(n["a"]),k["a"].use(a["a"]),k["a"].config.productionTip=!1,k["a"].prototype.$db=Ce,k["a"].prototype.$mode=be,new k["a"]({render:function(t){return t(q)},router:ge}).$mount("#app")},"64c6":function(t,e,s){"use strict";s("fd82")},"81e1":function(t,e,s){},8699:function(t,e,s){"use strict";s("c165")},"91ae":function(t,e,s){},9774:function(t,e,s){"use strict";s("f0581")},"99dc":function(t,e,s){},aae6:function(t,e,s){"use strict";s("99dc")},c165:function(t,e,s){},d103:function(t,e,s){},d3bb:function(t,e,s){"use strict";s("d5f5")},d5f5:function(t,e,s){},d7bc:function(t,e,s){"use strict";s("81e1")},d9e9:function(t,e,s){"use strict";s("414a")},e5b4:function(t,e,s){"use strict";s("01e8")},f0581:function(t,e,s){},fc01:function(t,e,s){},fc98:function(t,e,s){"use strict";s("1e8e")},fd82:function(t,e,s){}});
//# sourceMappingURL=app.50fab593.js.map